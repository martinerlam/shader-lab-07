<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fluid Cubes v0.4.1d</title>
<style>
html,body{margin:0;height:100%;background:#05060a;overflow:hidden}
#c{width:100%;height:100%;display:block}
#hud{position:fixed;left:12px;top:12px;color:rgba(255,255,255,.92);background:rgba(0,0,0,.38);
border:1px solid rgba(255,255,255,.10);border-radius:12px;padding:10px 12px;font:12px/1.35 system-ui}
#err{position:fixed;left:12px;bottom:12px;max-width:min(980px,calc(100vw - 24px));
padding:10px 12px;border-radius:12px;background:rgba(255,60,80,.14);border:1px solid rgba(255,60,80,.35);
color:rgba(255,255,255,.95);font:12px/1.35 ui-monospace;backdrop-filter:blur(10px);white-space:pre-wrap;display:none;z-index:9999}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:8px}
button{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:rgba(255,255,255,.92);
padding:7px 10px;border-radius:10px;cursor:pointer;font:600 12px/1 system-ui}
button:hover{background:rgba(255,255,255,.10)}
input[type=range]{width:180px}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace}
  #logo{
    position:fixed;
    right:12px;
    top:12px;
    width:auto;
    height:42px;
    max-width:220px;
    z-index:30;
    pointer-events:none;
    opacity:0.95;
    filter: drop-shadow(0 2px 10px rgba(0,0,0,0.55));
  }
</style>

</head>
<body>
<canvas id="c"></canvas>
  <img id="logo" src="./logo.png" alt="logo">

<div id="hud">
  <div><b>Fluid Cubes</b> <span class="mono">v0.4.5b3-pages-boot</span></div>
  <div class="mono" id="status">status: loading module...</div>
  <div class="mono" id="caps">caps: ...</div>
  <div class="mono" id="fps">FPS: ...</div>
  <div class="row">
    <button id="reset">Reset</button>
    <button id="diag">Diagnostic</button>
    <button id="debug">Debug</button>
    <span class="mono">Count</span>
    <button id="c2k">2k</button><button id="c8k">8k</button><button id="c20k">20k</button>
  </div>
  <div class="row mono">
    <label>Flow</label><input id="flow" type="range" min="0" max="4" step="0.01" value="1.20"><span id="flowV">1.20</span>
    <label>Scale</label><input id="flowScale" type="range" min="0.2" max="2.5" step="0.01" value="1.00"><span id="flowScaleV">1.00</span>
    <label>Stir</label><input id="stir" type="range" min="0" max="10" step="0.01" value="4.00"><span id="stirV">2.20</span>
    <label>Radius</label><input id="stirR" type="range" min="0.1" max="3.5" step="0.01" value="1.20"><span id="stirRV">0.80</span>
  </div>
  <div class="row mono">
    <label>Damp</label><input id="damp" type="range" min="0" max="2" step="0.01" value="0.22"><span id="dampV">0.22</span>
    <label>Bounce</label><input id="bounce" type="range" min="0" max="1" step="0.01" value="0.82"><span id="bounceV">0.82</span>
  </div>
  <div class="row mono">
    <label>Bounds X</label><input id="bx" type="range" min="0.5" max="6" step="0.01" value="2.30"><span id="bxV">2.30</span>
    <label>Y</label><input id="by" type="range" min="0.5" max="6" step="0.01" value="1.50"><span id="byV">1.50</span>
    <label>Z</label><input id="bz" type="range" min="0.5" max="6" step="0.01" value="2.30"><span id="bzV">2.30</span>
  </div>

  <div class="row mono">Left drag orbit | Wheel zoom | Right drag/touch stir | Debug: D key or button (adds heatmap on cubes)</div>
</div>

<div id="err"></div>

<script>
(function(){
  var err = document.getElementById("err");
  function show(msg){
    err.style.display = "block";
    err.textContent = msg;
  }
  window.addEventListener("error", function(e){
    show("ERROR:\n" + ((e.error && e.error.stack) ? e.error.stack : e.message));
  });
  window.addEventListener("unhandledrejection", function(e){
    var r = e.reason;
    show("PROMISE REJECTION:\n" + ((r && r.stack) ? r.stack : String(r)));
  });
})();
</script>

<script type="module" src="./src/boot.js"></script>
</body>
</html>
